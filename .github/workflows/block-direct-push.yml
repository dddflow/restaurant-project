name: ğŸš« Block Direct Push to Main

on:
  push:
    branches:
      - main

jobs:
  prevent-direct-push:
    runs-on: ubuntu-latest
    if: github.event.pusher.name != 'web-flow'
    steps:
      - name: ğŸ” Log user who attempted direct push
        run: |
          echo "ğŸš¨ Direct push attempt detected!"
          echo "ğŸ‘¤ Pusher: ${{ github.event.pusher.name }}"
          echo "ğŸ’¬ Commit message: ${{ github.event.head_commit.message }}"
          echo "ğŸ”— Compare URL: ${{ github.event.compare }}"
          
      - name: âŒ Cancel direct push to main
        run: |
          echo "â›” Direct push to 'main' is blocked. Please use a pull request."
          exit 1